<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://pyscript.net/latest/pyscript.css" />
    <script defer src="https://pyscript.net/latest/pyscript.js"></script>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Sharp:opsz,wght,FILL,GRAD@48,400,1,0" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/shim.min.js" integrity="sha512-nPnkC29R0sikt0ieZaAkk28Ib7Y1Dz7IqePgELH30NnSi1DzG4x+envJAOHz8ZSAveLXAHTR3ai2E9DZUsT8pQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/cpexcel.js" integrity="sha512-yi8FNVU1yTsGyKcq01t6Ti5U2flfCXRvam3U00sPCRJUSMs/ZhghiJPyh25QmI5Tr3L87d+aS1Irozv4Qt631g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.core.min.js" integrity="sha512-UhlYw//T419BPq/emC5xSZzkjjreRfN3426517rfsg/XIEC02ggQBb680V0VvP+zaDZ78zqse3rqnnI5EJ6rxA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js" integrity="sha512-M7nHCiNUOwFt6Us3r8alutZLm9qMt4s9951uo8jqO4UwJ1hziseL6O3ndFyigx6+LREfZqnhHxYjKRJ8ZQ69DQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha512-z4OUqw38qNLpn1libAN9BsoDx6nbNFio5lA6CuTp9NlK83b89hgyCVq+N5FdBJptINztxn1Z3SaKSKUS5UP60Q==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <link rel="stylesheet" href="./style.css">
    <title>Home</title>
</head>
<body>
    <div class="loading-screen">
        <img src="/images/myLogo-icon.svg" id="mySvg">
    </div>
    <div class="main">
        <header></header>
        <div class="main-container">
            <div class="main-section" id="company-research">
                <div class="main-card">
                    <h3>Company Financials</h3>
                    <p>
                        Please start here. Add the ticker symbols for the companies you would like to research.
                        <br>
                        These are the companies that will make up your portfolio.
                    </p>
                    <div class="" id="capm-container">
                        <h5>
                            CAPM
                        </h5>
                        <small>
                            Search companies by their ticker symbols to view financials and calculate various metrics
                        </small>
                        <div class="ticker-inputs" id="ticker-inputs">
                            <input type="text" name="ticker-symbol" placeholder="Company Ticker" class="ticker-symbol">
                        </div>
                        <div class="add-ticker-div">
                            <button type="button" class="add-ticker" id="add-ticker-btn">
                                <span class="material-symbols-rounded">
                                add
                                </span>
                            </button>
                        </div>
                        <div class="benchmark-div">
                            <label for="">
                                Benchmark
                                <select name="benchmark" id="benchmark">
                                    <option value="^GSPC">S&P 500</option>
                                    <option value="^DJI;">Dow Jones</option>
                                    <option value="^IXIC">Nasdaq Composite Index</option>
                                </select>
                            </label>
                        </div>
                        <div>
                            <button type="button" class="search-companies-btn" id="search-companies-btn">Search</button>
                        </div>
                    </div>
                    <div class="capm-breakdown" id="div-to-insert"></div>
                </div>
            </div>

            <div class="main-section" id="portfolio-optimization">
                <div class="main-card">
                    <h3>
                        Portfolio Optimization
                    </h3>
                    <div class="optimize-portfolio-div">
                        <button id="get-current-portfolio" class="optimize-btn">Run Portfolio Optimization</button>
                    </div>
                </div>
                <div class="data-charts-portfolio">
                    <div id="chartContainer"></div>
                    <div id="portfolio-breakdown-1"></div>
                    <div id="chart2Container"></div>
                    <div id="portfolio-breakdown-2"></div>
                    <div id="chart3Container"></div>
                    <div id="portfolio-breakdown-3"></div>
                </div>
            </div>

            

            <div class="main-section" id="ml-projections">
                <div id="simple-linear-model" class="main-card">
                    <h3>
                        Logistic Regression
                    </h3>
                    <div id="added-ticker-symbols" class="save-financial-data-div">
                        <select name="Simple model selector" id="simple-model-ticker-selector">
                            <option value="Default" selected>Select a Ticker symbol to model</option>
                        </select>

                        <button id="create-simple-model" class="create-model-btn">Create Simple Model</button>
                    </div>
                    <div id="model-accuracy"></div>
                    <div id="prediction-data" class="prediction-data"></div>
                    <div>
                        <button id="make-simple-pred-btn">Make Prediction</button>
                    </div>
                    <div id="prediction-verdict"></div>
                </div>
            </div>
            <div class="main-section" id="company-trends">
                <div class="main-card">
                    <h3>
                        Company Financial Data
                    </h3>
                    <div class="save-financial-data-div">
                        <select name="Company Financials Saver Selector" id="save-company-data-selector">
                            <option value="Default" selected>Select a Ticker symbol to save data for</option>
                        </select>
                        <button id="save-company-financial-data" class="save-data-btn">Save Company Data</button>
                    </div>
                    <div class="save-financial-data-div">
                        <select name="Company Financials Selector" id="company-financials-selector">
                            <option value="Default" selected>Select a Ticker symbol for financial data</option>
                        </select>
                        <div>
                            <button type="button" id="get-company-financial-data" class="visualize-data-btn">Visualize Company Data</button>
                        </div>
                    </div>
                </div>
                <div id="data-visualizations" class="data-charts-portfolio">
                    <div id="current-asset-breakdown" style="width: 600px; height: 600px; display: flex; justify-content: center; align-items: center"></div>
                    <div id="total-liability-breakdown" style="width: 600px; height: 600px; display: flex; justify-content: center; align-items: center"></div>
                    <div id="asset-liability-comparison" style="width: 600px; height: 500px; display: flex; justify-content: center; align-items: center"></div>
                    <div id="cash-flow-total-line" style="width: 600px; height: 500px; display: flex; justify-content: center; align-items: center"></div>
                    <div id="income-operatingCost-comparison" style="width: 600px; height: 500px; display: flex; justify-content: center; align-items: center"></div>
                    <div id="profitability-line" style="width: 600px; height: 500px; display: flex; justify-content: center; align-items: center"></div>
                    <div id="operating-cost-breakdown" style="width: 600px; height: 600px; display: flex; justify-content: center; align-items: center"></div>
                    <div id="revenue-breakdown" style="width: 600px; height: 600px; display: flex; justify-content: center; align-items: center"></div>
                </div>
                <div id="financial-summary"></div>
            </div>

            <div class="main-section" id="monte-carlo">
                <div class="main-card">
                    <h3>
                        Monte Carlo Simulations
                    </h3>
                    <div class="save-financial-data-div">
                        <select name="monte-carlo-sim-selector" id="monte-carlo-sim-selector">
                            <option value="Default" selected>Select a Ticker symbol to run simulations</option>
                        </select>
                        <button id="run-monte-carlo" class="create-model-btn">Run Simulations</button>
                    </div>
                </div>
                <div id="monte-chart-container"></div>
                <div id="monte-carlo-percentiles"></div>
                <div id="VaR-share-count-inputs" class="VaR-share-counts"></div>
                <div id="VaR-btn-container" style="display: none;">
                    <div class="btn-container">
                        <button id="calculate-VaR-btn" class="create-model-btn">Calculate VaR</button>
                    </div>
                </div>
                <div id="VaR-calculations"></div>
            </div>

        </div>
        <footer>
            <div class="footer-btn" data-pagename="company-research" id="defaultOpen">
                <span class="material-symbols-sharp">
                    attach_money
                </span>
                <p>
                    Companies
                </p>
            </div>

            <div class="footer-btn" data-pagename="portfolio-optimization">
                <span class="material-symbols-sharp">
                    pie_chart
                </span>
                <p>
                    Portfolio
                </p>
            </div>


            <div class="footer-btn" data-pagename="company-trends">
                <span class="material-symbols-sharp">
                    finance
                </span>
                <p>
                    Trends
                </p>
            </div>

            <div class="footer-btn" data-pagename="ml-projections">
                <span class="material-symbols-sharp">
                    query_stats
                </span>
                <p>
                    ML Projections
                </p>
            </div>

            <div class="footer-btn" data-pagename="monte-carlo">
                <span class="material-symbols-sharp">
                    shuffle
                </span>
                <p>
                    Monte Carlo
                </p>
            </div>

        </footer>
    </div>
    <script src="./main.js"></script>
    <!-- Python Packages and Scripts-->
    <py-config>
      packages = ["numpy", "matplotlib", "pandas", "scikit-learn", "scipy", "statsmodels"]
      [splashscreen]
        enabled = false
    </py-config>
    <py-script src="main.py">
        import numpy as np
        import pandas as pd
        import scipy as sc
        import sklearn
        import statsmodels.api as sm
        from js import myFunction
    </py-script>
    
    
</body>
</html>